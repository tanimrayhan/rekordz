<!DOCTYPE html>
<html>
<head>
  <title>Notes</title>
  <link rel="stylesheet" href="theme.css">
</head>
<body>

<div class="page-wrapper">
  <h1>üìù Notes</h1>

  <div class="box">
    <input id="title" placeholder="Note title">
    <button onclick="addNote()">Add Note</button>
  </div>

  <div class="box">
    <ul id="notesList"></ul>
  </div>
</div>

<script>
const API = "https://rekordz-1.onrender.com";
const notesList = document.getElementById("notesList");
const titleInput = document.getElementById("title");

async function loadNotes() {
  const res = await fetch(`${API}/notes`);
  const notes = await res.json();

  notesList.innerHTML = "";

  notes.forEach(note => {
    const li = document.createElement("li");
    li.textContent = note.title;
    li.onclick = () => {
      window.location.href = `note-details.html?id=${note.id}`;
    };
    notesList.appendChild(li);
  });
}

async function addNote() {
  if (!titleInput.value.trim()) return;

  await fetch(`${API}/notes`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      title: titleInput.value,
      content: ""
    })
  });

  titleInput.value = "";
  loadNotes();
}

loadNotes();
</script>

</body>
</html>
